{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "cmake config",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/set_venv.cmd",
      "args": [
        "C:/PROGRA~1/CMake/bin/cmake.exe",
        "--preset",
        "Ninja_debug"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [
        "$msCompile"
      ]
    },
    {
      "label": "cmake config maya",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/set_venv.cmd",
      "args": [
        "C:/PROGRA~1/CMake/bin/cmake.exe",
        "--preset",
        "Ninja_RelWithDebInfo"
      ],
      "problemMatcher": [
        "$msCompile"
      ]
    },
    {
      "label": "cmake config vs",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/set_venv.cmd",
      "args": [
        "C:/PROGRA~1/CMake/bin/cmake.exe",
        "--preset",
        "vs2022"
      ],
      "problemMatcher": [
        "$msCompile"
      ]
    },
    {
      "label": "cmake build",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/set_venv.cmd",
      "args": [
        "C:/PROGRA~1/CMake/bin/cmake.exe",
        "--build",
        "--preset",
        "debug_doodle"
      ],
      "problemMatcher": [
        "$msCompile"
      ],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": true,
        "close": true
      }
    },
    {
      "label": "cmake build maya",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/set_venv.cmd",
      "args": [
        "C:/PROGRA~1/CMake/bin/cmake.exe",
        "--build",
        "--preset",
        "debug_maya"
      ],
      "problemMatcher": [
        "$msCompile"
      ],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": true,
        "clear": true
      }
    },
    {
      "label": "cmake clean",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/set_venv.cmd",
      "args": [
        "C:/PROGRA~1/CMake/bin/cmake.exe",
        "--build",
        "${workspaceFolder}/build/${input:build_dir}",
        "--target",
        "clean"
      ],
      "problemMatcher": [
        "$msCompile"
      ]
    },
    {
      "label": "build UE plug",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/Build_UE.cmd",
      "problemMatcher": [
        "$msCompile"
      ]
    },
    {
      "label": "build_all",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/build/build_all.cmd",
      "problemMatcher": []
    },
    {
      "label": "运行boost测试",
      "type": "shell",
      "command": "${workspaceFolder}/build/Ninja_debug/bin/test_main.exe",
      "args": [
        "--color_output=true",
        "--detect_memory_leaks=0",
        "--log_level=message",
        "--run_test=${input:test_list}"
      ],
      "problemMatcher": []
    },
    {
      "label": "test task arg",
      "type": "shell",
      "command": "echo",
      "args": [
        "--color_output=true",
        "--detect_memory_leaks=0",
        "--log_level=message",
        "--run_test=${input:build_dir}"
      ],
      "problemMatcher": []
    },
    {
      "label": "部署",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/deployment_server.ps1",
      "args": [
        "${input:dep_opt}",
        "${input:dep_opt2}"
      ],
      "problemMatcher": []
    },
    {
      "label": "复制数据库",
      "type": "shell",
      "command": "${workspaceFolder}/build_script/copy_db.ps1",
      "problemMatcher": [
        {
          "owner": "powershell",
          "severity": "error",
          "fileLocation": [
            "relative",
            "${workspaceFolder}"
          ],
          "pattern": {
            "regexp": "^At (.*):(\\d+) char:(\\d+)(.*)",
            "file": 1,
            "line": 2,
            "column": 3,
            "message": 4
          }
        }
      ]
    }
  ],
  "inputs": [
    {
      "id": "arg_input",
      "type": "promptString",
      "description": "input arg",
      "default": "dingding_base/client_get_user_attendance"
    },
    {
      "id": "build_dir",
      "type": "command",
      "command": "extension.commandvariable.pickStringRemember",
      "args": {
        "fileName": "${workspaceFolder}/CMakePresets.json",
        "fileFormat": "json",
        "description": "选择构建",
        "jsonOption": {
          "value": "content.configurePresets[__itemIdx__].hidden ? '' : content.configurePresets[__itemIdx__].name"
        }
      }
    },
    {
      "id": "dep_opt",
      "type": "pickString",
      "description": "部署选项",
      "options": [
        "-CopyServer",
        "-BuildKitsu",
        ""
      ]
    },
    {
      "id": "dep_opt2",
      "type": "pickString",
      "description": "部署选项2",
      "options": [
        "-CopyServer",
        "-BuildKitsu",
        ""
      ]
    },
    {
      "id": "test_list",
      "type": "command",
      "command": "extension.commandvariable.pickStringRemember",
      "args": {
        "fileName": "${workspaceFolder}/.vscode/test_list.json",
        "fileFormat": "json",
        "description": "选择测试",
        "jsonOption": {
          "label": "content.options[__itemIdx__]",
          "value": "content.options[__itemIdx__]"
        }
      }
    }
  ]
}